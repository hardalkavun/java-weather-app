<html>
<head>
<title>WebApp.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #2aacb8;}
.s5 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
WebApp.java</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">json</span><span class="s2">.</span><span class="s1">simple</span><span class="s2">.</span><span class="s1">JSONArray</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">json</span><span class="s2">.</span><span class="s1">simple</span><span class="s2">.</span><span class="s1">JSONObject</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">json</span><span class="s2">.</span><span class="s1">simple</span><span class="s2">.</span><span class="s1">parser</span><span class="s2">.</span><span class="s1">JSONParser</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">IOException</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">net</span><span class="s2">.</span><span class="s1">HttpURLConnection</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">net</span><span class="s2">.</span><span class="s1">URL</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">time</span><span class="s2">.</span><span class="s1">LocalDateTime</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">time</span><span class="s2">.</span><span class="s1">format</span><span class="s2">.</span><span class="s1">DateTimeFormatter</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Scanner</span><span class="s2">;</span>

<span class="s0">public class </span><span class="s1">WebApp </span><span class="s2">{</span>

    <span class="s3">//girilen konum bilgisine göre konumun o anki hava durumunu verecek</span>
    <span class="s0">public static </span><span class="s1">JSONObject havaDurumuVer</span><span class="s2">(</span><span class="s1">String konumAdi</span><span class="s2">) {</span>
        <span class="s1">JSONArray konumBilgisi </span><span class="s2">= </span><span class="s1">getKonumBilgisi</span><span class="s2">(</span><span class="s1">konumAdi</span><span class="s2">);</span>


        <span class="s1">JSONObject konum </span><span class="s2">= (</span><span class="s1">JSONObject</span><span class="s2">) </span><span class="s1">konumBilgisi</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">0</span><span class="s2">);</span>

        <span class="s3">//girilen konum bilgisine göre değişkenlere eylem boylam atanır</span>

        <span class="s0">double </span><span class="s1">enlem </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">konum</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;latitude&quot;</span><span class="s2">);</span>
        <span class="s0">double </span><span class="s1">boylam </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">konum</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;longitude&quot;</span><span class="s2">);</span>

        <span class="s1">WeatherApiUrlBuilder urlBuilder </span><span class="s2">= </span><span class="s0">new </span><span class="s1">WeatherApiUrlBuilder</span><span class="s2">();</span>
        <span class="s1">urlBuilder</span><span class="s2">.</span><span class="s1">setLatitude</span><span class="s2">(</span><span class="s1">enlem</span><span class="s2">);</span>
        <span class="s1">urlBuilder</span><span class="s2">.</span><span class="s1">setLongitude</span><span class="s2">(</span><span class="s1">boylam</span><span class="s2">);</span>

        <span class="s3">//getter setter</span>
        <span class="s1">String urlString </span><span class="s2">= </span><span class="s1">urlBuilder</span><span class="s2">.</span><span class="s1">buildUrl</span><span class="s2">();</span>
        <span class="s0">try </span><span class="s2">{</span>
            <span class="s3">//API'Ye bağlan ve cevap ver</span>
            <span class="s1">HttpURLConnection connection </span><span class="s2">= </span><span class="s1">fetchApiResponse</span><span class="s2">(</span><span class="s1">urlString</span><span class="s2">);</span>

            <span class="s3">//cevap kontrol edilir</span>
            <span class="s0">if </span><span class="s2">(</span><span class="s1">connection</span><span class="s2">.</span><span class="s1">getResponseCode</span><span class="s2">() != </span><span class="s4">200</span><span class="s2">) {        </span><span class="s3">//HTTP response code 200 olduğu zaman düzgün şekilde bağlanıldığı anlamına gelir</span>
                <span class="s1">System</span><span class="s2">.</span><span class="s1">out</span><span class="s2">.</span><span class="s1">println</span><span class="s2">(</span><span class="s5">&quot;HATA: API'YE BAĞLANILAMADI&quot;</span><span class="s2">);</span>
                <span class="s0">return null</span><span class="s2">;</span>
            <span class="s2">}</span>

            <span class="s1">StringBuilder returnJson </span><span class="s2">= </span><span class="s0">new </span><span class="s1">StringBuilder</span><span class="s2">();</span>
            <span class="s1">Scanner scanner </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Scanner</span><span class="s2">(</span><span class="s1">connection</span><span class="s2">.</span><span class="s1">getInputStream</span><span class="s2">());</span>
            <span class="s0">while </span><span class="s2">(</span><span class="s1">scanner</span><span class="s2">.</span><span class="s1">hasNext</span><span class="s2">()) {</span>
                <span class="s3">// read and store in the StringBuilder</span>
                <span class="s1">returnJson</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">scanner</span><span class="s2">.</span><span class="s1">nextLine</span><span class="s2">());</span>
            <span class="s2">}</span>
            <span class="s1">scanner</span><span class="s2">.</span><span class="s1">close</span><span class="s2">();</span>
            <span class="s1">connection</span><span class="s2">.</span><span class="s1">disconnect</span><span class="s2">();</span>

            <span class="s1">JSONParser parser </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JSONParser</span><span class="s2">();</span>
            <span class="s1">JSONObject returnJsonObj </span><span class="s2">= (</span><span class="s1">JSONObject</span><span class="s2">) </span><span class="s1">parser</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">returnJson</span><span class="s2">));</span>

            <span class="s3">//saatlik olarak dönüt almayı sağlar</span>
            <span class="s1">JSONObject hourly </span><span class="s2">= (</span><span class="s1">JSONObject</span><span class="s2">) </span><span class="s1">returnJsonObj</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;hourly&quot;</span><span class="s2">); </span><span class="s3">//hourly anahtar kelime JSON objesini saatlik olarak döndürmeye yarayacak</span>

            <span class="s1">JSONArray time </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">hourly</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;time&quot;</span><span class="s2">);</span>
            <span class="s0">int </span><span class="s1">index </span><span class="s2">= </span><span class="s1">findIndexOfCurrentTime</span><span class="s2">(</span><span class="s1">time</span><span class="s2">);</span>

            <span class="s3">//sıcaklık kısmı</span>
            <span class="s1">JSONArray sicaklikBilgisi </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">hourly</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;temperature_2m&quot;</span><span class="s2">);</span>
            <span class="s0">double </span><span class="s1">sicaklik </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">sicaklikBilgisi</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">index</span><span class="s2">);</span>

            <span class="s3">//hava durumu kısmı yağmurlu bulutlu</span>
            <span class="s1">JSONArray weathercode </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">hourly</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;weather_code&quot;</span><span class="s2">);</span>
            <span class="s3">//String havaDurumu=(String) havaDurumBilgisi.get(index);</span>
            <span class="s1">String havaDurumu </span><span class="s2">= </span><span class="s1">convertWeatherCode</span><span class="s2">((</span><span class="s0">long</span><span class="s2">) </span><span class="s1">weathercode</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">index</span><span class="s2">));</span>


            <span class="s3">//nem alma kısmı</span>
            <span class="s1">JSONArray nemBilgisi </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">hourly</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;relative_humidity_2m&quot;</span><span class="s2">);</span>
            <span class="s0">long </span><span class="s1">nemOrani </span><span class="s2">= (</span><span class="s0">long</span><span class="s2">) </span><span class="s1">nemBilgisi</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">index</span><span class="s2">);</span>

            <span class="s3">//rüzgar hızını alma</span>
            <span class="s1">JSONArray ruzgarHizBilgisi </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">hourly</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;wind_speed_10m&quot;</span><span class="s2">);</span>
            <span class="s0">double </span><span class="s1">ruzgarHizi </span><span class="s2">= (</span><span class="s0">double</span><span class="s2">) </span><span class="s1">ruzgarHizBilgisi</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">index</span><span class="s2">);</span>

            <span class="s3">//build the weather json data object that we are going to access in our frontend</span>
            <span class="s1">JSONObject object </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JSONObject</span><span class="s2">();</span>
            <span class="s1">object</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s5">&quot;temperature&quot;</span><span class="s2">, </span><span class="s1">sicaklik</span><span class="s2">);</span>
            <span class="s1">object</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s5">&quot;weather_condition&quot;</span><span class="s2">, </span><span class="s1">havaDurumu</span><span class="s2">);             </span><span class="s3">//JSON nesnesi sayesinde API'den alınan bilgileri değişkenlere put fonksiyonu ile atama</span>
            <span class="s1">object</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s5">&quot;humidity&quot;</span><span class="s2">, </span><span class="s1">nemOrani</span><span class="s2">);</span>
            <span class="s1">object</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s5">&quot;windspeed&quot;</span><span class="s2">, </span><span class="s1">ruzgarHizi</span><span class="s2">);</span>
            <span class="s0">return </span><span class="s1">object</span><span class="s2">;</span>
        <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">Exception e</span><span class="s2">) {</span>
            <span class="s1">e</span><span class="s2">.</span><span class="s1">printStackTrace</span><span class="s2">();</span>
        <span class="s2">}</span>
        <span class="s0">return null</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s3">//konum bilgisinin alınmasını sağlayacak</span>
    <span class="s0">public static </span><span class="s1">JSONArray getKonumBilgisi</span><span class="s2">(</span><span class="s1">String konumAdi</span><span class="s2">) {</span>
        <span class="s1">konumAdi </span><span class="s2">= </span><span class="s1">konumAdi</span><span class="s2">.</span><span class="s1">replaceAll</span><span class="s2">(</span><span class="s5">&quot; &quot;</span><span class="s2">, </span><span class="s5">&quot;+&quot;</span><span class="s2">); </span><span class="s3">//API bilgiyi alırken boşluk yerine + koyuyor hata çıkmaması için boşluk yerine + yazılmalı</span>
        <span class="s3">//getter setter yap</span>
        <span class="s1">String apiUrl </span><span class="s2">= </span><span class="s5">&quot;https://geocoding-api.open-meteo.com/v1/search?name=&quot; </span><span class="s2">+ </span><span class="s1">konumAdi </span><span class="s2">+ </span><span class="s5">&quot;&amp;count=10&amp;language=en&amp;format=json&quot;</span><span class="s2">;  </span><span class="s3">// kullanacağımız API'nin adresinin gireceğimiz konuma göre ayarlanması</span>
        <span class="s0">try </span><span class="s2">{</span>
            <span class="s3">// API bağlantısını al</span>
            <span class="s1">HttpURLConnection connection </span><span class="s2">= </span><span class="s1">fetchApiResponse</span><span class="s2">(</span><span class="s1">apiUrl</span><span class="s2">);</span>

            <span class="s3">// Bağlantının başarılı olup olmadığını kontrol et (HTTP 200 başaro durumu)</span>
            <span class="s0">if </span><span class="s2">(</span><span class="s1">connection</span><span class="s2">.</span><span class="s1">getResponseCode</span><span class="s2">() != </span><span class="s4">200</span><span class="s2">) {</span>
                <span class="s3">// Bağlantı başarısızsa bir hata mesajı yazdır ve null döndür</span>
                <span class="s1">System</span><span class="s2">.</span><span class="s1">out</span><span class="s2">.</span><span class="s1">println</span><span class="s2">(</span><span class="s5">&quot;API'ye Bağlanılamadı&quot;</span><span class="s2">);</span>
                <span class="s0">return null</span><span class="s2">;</span>
            <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                <span class="s3">// API'den dönen veriyi bir StringBuilder'a kaydet</span>
                <span class="s1">StringBuilder result </span><span class="s2">= </span><span class="s0">new </span><span class="s1">StringBuilder</span><span class="s2">();</span>
                <span class="s1">Scanner scanner </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Scanner</span><span class="s2">(</span><span class="s1">connection</span><span class="s2">.</span><span class="s1">getInputStream</span><span class="s2">()); </span><span class="s3">// API yanıtını okuyacak bir tarayıcı oluştur</span>

                <span class="s3">// API'den gelen tüm satırları oku ve StringBuilder'a ekle</span>
                <span class="s0">while </span><span class="s2">(</span><span class="s1">scanner</span><span class="s2">.</span><span class="s1">hasNext</span><span class="s2">()) {</span>
                    <span class="s1">result</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">scanner</span><span class="s2">.</span><span class="s1">nextLine</span><span class="s2">());</span>
                <span class="s2">}</span>
                <span class="s1">scanner</span><span class="s2">.</span><span class="s1">close</span><span class="s2">(); </span><span class="s3">// Tarayıcıyı kapat</span>
                <span class="s1">connection</span><span class="s2">.</span><span class="s1">disconnect</span><span class="s2">(); </span><span class="s3">// Bağlantıyı kes</span>

                <span class="s3">// JSON yanıtını ayrıştır</span>
                <span class="s1">JSONParser parser </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JSONParser</span><span class="s2">();</span>
                <span class="s1">JSONObject resultObj </span><span class="s2">= (</span><span class="s1">JSONObject</span><span class="s2">) </span><span class="s1">parser</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">result</span><span class="s2">)); </span><span class="s3">// JSON stringini nesneye dönüştür</span>

                <span class="s3">// JSON yanıtında &quot;results&quot; anahtarını al</span>
                <span class="s1">JSONArray konumBilgisi </span><span class="s2">= (</span><span class="s1">JSONArray</span><span class="s2">) </span><span class="s1">resultObj</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s5">&quot;results&quot;</span><span class="s2">);</span>
                <span class="s3">// Not: &quot;results&quot; anahtarını Kullanmamız lazım Kullanmayınca Çalışmıyor !!!</span>

                <span class="s3">// Sonuç olarak konum bilgisi içeren JSONArray'i döndür</span>
                <span class="s0">return </span><span class="s1">konumBilgisi</span><span class="s2">;</span>
            <span class="s2">}</span>
        <span class="s2">}  </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">Exception e</span><span class="s2">) {</span>
            <span class="s1">e</span><span class="s2">.</span><span class="s1">printStackTrace</span><span class="s2">();</span>
        <span class="s2">}</span>
        <span class="s0">return null</span><span class="s2">;</span>
    <span class="s2">}</span>



    <span class="s0">private static </span><span class="s1">HttpURLConnection fetchApiResponse</span><span class="s2">(</span><span class="s1">String apiUrl</span><span class="s2">) {</span>
        <span class="s0">try </span><span class="s2">{</span>
            <span class="s3">// Verilen API URL'sini bir URL nesnesine çevir</span>
            <span class="s1">URL url </span><span class="s2">= </span><span class="s0">new </span><span class="s1">URL</span><span class="s2">(</span><span class="s1">apiUrl</span><span class="s2">);</span>

            <span class="s3">// URL üzerinden bir HTTP bağlantısı oluştur</span>
            <span class="s1">HttpURLConnection connection </span><span class="s2">= (</span><span class="s1">HttpURLConnection</span><span class="s2">) </span><span class="s1">url</span><span class="s2">.</span><span class="s1">openConnection</span><span class="s2">();</span>

            <span class="s3">// HTTP isteği tipini &quot;GET&quot; olarak ayarla</span>
            <span class="s1">connection</span><span class="s2">.</span><span class="s1">setRequestMethod</span><span class="s2">(</span><span class="s5">&quot;GET&quot;</span><span class="s2">);</span>

            <span class="s3">// Bağlantıyı başlat</span>
            <span class="s1">connection</span><span class="s2">.</span><span class="s1">connect</span><span class="s2">();</span>

            <span class="s3">// Bağlantı nesnesini döndür</span>
            <span class="s0">return </span><span class="s1">connection</span><span class="s2">;</span>

        <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IOException e</span><span class="s2">) {</span>
            <span class="s3">// Hata oluşursa hata bilgilerini yazdır</span>
            <span class="s1">e</span><span class="s2">.</span><span class="s1">printStackTrace</span><span class="s2">();</span>
        <span class="s2">}</span>
        <span class="s3">// Hata durumunda null döndür</span>
        <span class="s0">return null</span><span class="s2">;</span>
    <span class="s2">};</span>


    <span class="s0">private static int </span><span class="s1">findIndexOfCurrentTime</span><span class="s2">(</span><span class="s1">JSONArray timeList</span><span class="s2">) {</span>

        <span class="s1">String currentTime </span><span class="s2">= </span><span class="s1">getCurrentTime</span><span class="s2">();</span>

        <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s4">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">timeList</span><span class="s2">.</span><span class="s1">size</span><span class="s2">(); </span><span class="s1">i</span><span class="s2">++) {</span>
            <span class="s1">String time </span><span class="s2">= (</span><span class="s1">String</span><span class="s2">) </span><span class="s1">timeList</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">i</span><span class="s2">);</span>
            <span class="s0">if </span><span class="s2">(</span><span class="s1">time</span><span class="s2">.</span><span class="s1">equalsIgnoreCase</span><span class="s2">(</span><span class="s1">currentTime</span><span class="s2">)) {</span>

                <span class="s0">return </span><span class="s1">i</span><span class="s2">;</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
        <span class="s0">return </span><span class="s4">0</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s0">public static </span><span class="s1">String getCurrentTime</span><span class="s2">() {</span>
        <span class="s1">LocalDateTime currentDateTime </span><span class="s2">= </span><span class="s1">LocalDateTime</span><span class="s2">.</span><span class="s1">now</span><span class="s2">();</span>

        <span class="s3">// gün ay yıl zaman döngüsü API farklı şekilde okuduğu için düzeltme</span>
        <span class="s1">DateTimeFormatter formatter </span><span class="s2">= </span><span class="s1">DateTimeFormatter</span><span class="s2">.</span><span class="s1">ofPattern</span><span class="s2">(</span><span class="s5">&quot;yyyy-MM-dd'T'HH':00'&quot;</span><span class="s2">);</span>

        <span class="s1">String formattedTime </span><span class="s2">= </span><span class="s1">currentDateTime</span><span class="s2">.</span><span class="s1">format</span><span class="s2">(</span><span class="s1">formatter</span><span class="s2">);</span>
        <span class="s0">return </span><span class="s1">formattedTime</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s3">// API'nin kendi sayısal kodlarına göre hava durum bilgisi var bunu okunabilir hale getirmemiz gerek</span>
    <span class="s0">public static </span><span class="s1">String convertWeatherCode</span><span class="s2">(</span><span class="s0">long </span><span class="s1">weathercode</span><span class="s2">) {</span>
        <span class="s1">String havaDurumu </span><span class="s2">= </span><span class="s5">&quot;&quot;</span><span class="s2">;</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">weathercode </span><span class="s2">== </span><span class="s4">0L</span><span class="s2">) {</span>
            <span class="s1">havaDurumu </span><span class="s2">= </span><span class="s5">&quot;Güneşli&quot;</span><span class="s2">;</span>

        <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">weathercode </span><span class="s2">&gt; </span><span class="s4">0L </span><span class="s2">&amp;&amp; </span><span class="s1">weathercode </span><span class="s2">&lt;= </span><span class="s4">3L</span><span class="s2">) {</span>
            <span class="s1">havaDurumu </span><span class="s2">= </span><span class="s5">&quot;Bulutlu&quot;</span><span class="s2">;</span>
        <span class="s2">} </span><span class="s0">else if </span><span class="s2">((</span><span class="s1">weathercode </span><span class="s2">&gt;= </span><span class="s4">51L </span><span class="s2">&amp;&amp; </span><span class="s1">weathercode </span><span class="s2">&lt;= </span><span class="s4">67L</span><span class="s2">) || (</span><span class="s1">weathercode </span><span class="s2">&gt;= </span><span class="s4">80L </span><span class="s2">&amp;&amp; </span><span class="s1">weathercode </span><span class="s2">&lt;= </span><span class="s4">99L</span><span class="s2">)) {</span>
            <span class="s1">havaDurumu </span><span class="s2">= </span><span class="s5">&quot;Yağmurlu&quot;</span><span class="s2">;</span>
        <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">weathercode </span><span class="s2">&gt;= </span><span class="s4">71L </span><span class="s2">&amp;&amp; </span><span class="s1">weathercode </span><span class="s2">&lt;= </span><span class="s4">77L</span><span class="s2">) {</span>
            <span class="s1">havaDurumu </span><span class="s2">= </span><span class="s5">&quot;Karlı&quot;</span><span class="s2">;</span>

        <span class="s2">}</span>
        <span class="s0">return </span><span class="s1">havaDurumu</span><span class="s2">;</span>
    <span class="s2">}</span>



















    <span class="s3">/* 
    public static JSONObject getWeather(String location) { 
        JSONArray locationData = fetchLocationData(location); 
        if (locationData == null || locationData.isEmpty()) { 
            System.out.println(&quot;No location data found.&quot;); 
            return null; 
        } 
 
        JSONObject firstLocation = (JSONObject) locationData.get(0); 
        double latitude = (double) firstLocation.get(&quot;latitude&quot;); 
        double longitude = (double) firstLocation.get(&quot;longitude&quot;); 
 
        String apiUrl = String.format( 
                &quot;https://api.open-meteo.com/v1/forecast?latitude=%.4f&amp;longitude=%.4f&amp;hourly=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&amp;timezone=Europe/London&quot;, 
                latitude, longitude 
        ); 
 
        try { 
            HttpURLConnection connection = fetchApiResponse(apiUrl); 
            if (connection.getResponseCode() != 200) { 
                System.out.println(&quot;Failed to connect to weather API.&quot;); 
                return null; 
            } 
 
            StringBuilder response = new StringBuilder(); 
            try (Scanner scanner = new Scanner(connection.getInputStream())) { 
                while (scanner.hasNext()) { 
                    response.append(scanner.nextLine()); 
                } 
            } 
 
            JSONParser parser = new JSONParser(); 
            JSONObject jsonResponse = (JSONObject) parser.parse(response.toString()); 
 
            JSONObject hourlyData = (JSONObject) jsonResponse.get(&quot;hourly&quot;); 
            JSONArray timeArray = (JSONArray) hourlyData.get(&quot;time&quot;); 
            int currentIndex = findCurrentTimeIndex(timeArray); 
 
            double temperature = ((Number) ((JSONArray) hourlyData.get(&quot;temperature_2m&quot;)).get(currentIndex)).doubleValue(); 
            long humidity = ((Number) ((JSONArray) hourlyData.get(&quot;relative_humidity_2m&quot;)).get(currentIndex)).longValue(); 
            long weatherCode = ((Number) ((JSONArray) hourlyData.get(&quot;weather_code&quot;)).get(currentIndex)).longValue(); 
            double windSpeed = ((Number) ((JSONArray) hourlyData.get(&quot;wind_speed_10m&quot;)).get(currentIndex)).doubleValue(); 
 
 
            JSONObject weatherData = new JSONObject(); 
            weatherData.put(&quot;temperature&quot;, temperature); 
            weatherData.put(&quot;weather_condition&quot;, decodeWeatherCode(weatherCode)); 
            weatherData.put(&quot;humidity&quot;, humidity); 
            weatherData.put(&quot;windspeed&quot;, windSpeed); 
 
            return weatherData; 
 
        } catch (Exception e) { 
            e.printStackTrace(); 
        } 
 
        return null; 
    } 
 
    private static JSONArray fetchLocationData(String location) { 
        location = location.replace(&quot; &quot;, &quot;+&quot;); 
        String apiUrl = &quot;https://geocoding-api.open-meteo.com/v1/search?name=&quot; + location + &quot;&amp;count=1&amp;language=en&amp;format=json&quot;; 
 
        try { 
            HttpURLConnection connection = fetchApiResponse(apiUrl); 
            if (connection.getResponseCode() != 200) { 
                System.out.println(&quot;Failed to connect to geocoding API.&quot;); 
                return null; 
            } 
 
            StringBuilder response = new StringBuilder(); 
            try (Scanner scanner = new Scanner(connection.getInputStream())) { 
                while (scanner.hasNext()) { 
                    response.append(scanner.nextLine()); 
                } 
            } 
 
            JSONParser parser = new JSONParser(); 
            JSONObject jsonResponse = (JSONObject) parser.parse(response.toString()); 
            return (JSONArray) jsonResponse.get(&quot;results&quot;); 
 
        } catch (Exception e) { 
            e.printStackTrace(); 
        } 
 
        return null; 
    } 
 
    private static HttpURLConnection fetchApiResponse(String apiUrl) { 
        try { 
            URL url = new URL(apiUrl); 
            HttpURLConnection connection = (HttpURLConnection) url.openConnection(); 
            connection.setRequestMethod(&quot;GET&quot;); 
            connection.connect(); 
            return connection; 
        } catch (IOException e) { 
            e.printStackTrace(); 
        } 
        return null; 
    } 
 
    private static int findCurrentTimeIndex(JSONArray timeArray) { 
        String currentTime = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:00&quot;)); 
        for (int i = 0; i &lt; timeArray.size(); i++) { 
            if (timeArray.get(i).equals(currentTime)) { 
                return i; 
            } 
        } 
        return 0; 
    } 
 
    private static String decodeWeatherCode(long code) { 
        if (code == 0) return &quot;Clear&quot;; 
        if (code &lt;= 3) return &quot;Cloudy&quot;; 
        if ((code &gt;= 51 &amp;&amp; code &lt;= 67) || (code &gt;= 80 &amp;&amp; code &lt;= 99)) return &quot;Rainy&quot;; 
        if (code &gt;= 71 &amp;&amp; code &lt;= 77) return &quot;Snowy&quot;; 
        return &quot;Unknown&quot;; 
    } 
 
     */</span>
<span class="s2">}</span>





</pre>
</body>
</html>